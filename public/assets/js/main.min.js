function FetchPhotos(o){return{allPhotos:[],filteredPhotos:[],get:function(e){var t=o.defer(),r=this;return _500px.api("/photos",e,function(o){o.success?(r.allPhotos=o.data.photos,r.filteredPhotos=r.onlyWithLocation(o.data.photos),t.resolve({success:!0})):t.reject({success:!1,status:o.status,message:o.error_message})}),t.promise},onlyWithLocation:function(o){return _.filter(o,function(o){return null!==o.latitude&&null!==o.longitude})}}}function GameController(o,e){this.round=1,this.photoData=null,this.currentPhoto=null,this.fetchPhotos=e}function GlobalController(o,e){var t=this;t.currentUser=null,t.userService=e,o.$on("userAuthenticated",function(e,r){o.$apply(function(){t.currentUser=r,console.log(r)})})}angular.module("pixelPlay.game",[]),angular.module("pixelPlay.score",[]),angular.module("appRoutes",[]).config(["$routeProvider","$locationProvider",function(o,e){o.when("/",{templateUrl:"/components/dashboard/dashboard.index.html"}).when("/game",{templateUrl:"/components/game/game.index.html",controller:"GameController",controllerAs:"game"}),e.html5Mode(!0)}]),angular.module("pixelPlay",["ngRoute","ngResource","appRoutes","pixelPlay.game","pixelPlay.score"]).run(["User","$rootScope",function(o){_500px.init({sdk_key:"1e6cd00470800d39b07106a70a650cdf88277901"}),console.log("500px initialized"),_500px.getAuthorizationStatus(o.updateUser)}]),angular.module("pixelPlay.game").factory("FetchPhotos",["$q",FetchPhotos]),GameController.prototype.start=function(){var o=this,e={feature:"fresh_today",only:"Urban Exploration",image_size:4,rpp:100};o.fetchPhotos.get(e).then(function(){o.photoData=o.fetchPhotos.filteredPhotos,console.log(o.fetchPhotos)},function(o){alert("Failed: "+o.message)})},GameController.prototype.getNextPhoto=function(){this.currentPhoto=this.photoData.pop()},GameController.$inject=["$scope","FetchPhotos"],angular.module("pixelPlay.game").controller("GameController",["$scope","FetchPhotos",GameController]),GlobalController.$inject=["$scope","User"],angular.module("pixelPlay").controller("GlobalController",["$scope","User",GlobalController]),angular.module("pixelPlay.score").factory("Score",["$resource",function(o){return o("/api/scores/:id")}]),angular.module("pixelPlay").service("User",["$rootScope","Score",function(o){var e=this;e.currentUser=null,e.data=null,e.login=function(){_500px.login(e.updateUser)},e.logout=function(){_500px.logout(e.updateUser)},e.updateUser=function(t){"authorized"===t?_500px.api("/users",function(t){console.log(t),e.currentUser=t.data.user,e.data=t,o.$broadcast("userAuthenticated",t.data.user)}):(console.log("updateUser is logging out"),e.currentUser=e.data=null)}}]);
//# sourceMappingURL=main.min.js.map