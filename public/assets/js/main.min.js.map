{"version":3,"sources":["game/fetch_photos.service.js","game/game.ctrl.js","global/global.ctrl.js","components/game/game.module.js","components/score/score.module.js","app.routes.js","app.js","score/score.service.js","user/user.service.js"],"names":[],"mappings":"AAAA,QAAA,aAAA,GACA,OACA,aACA,kBAEA,IAAA,SAAA,GACA,GAAA,GAAA,EAAA,QACA,EAAA,IAmBA,OAjBA,QAAA,IAAA,UAAA,EAAA,SAAA,GACA,EAAA,SACA,EAAA,UAAA,EAAA,KAAA,OACA,EAAA,eAAA,EAAA,iBAAA,EAAA,KAAA,QAEA,EAAA,SACA,SAAA,KAGA,EAAA,QACA,SAAA,EACA,OAAA,EAAA,OACA,QAAA,EAAA,kBAKA,EAAA,SAGA,iBAAA,SAAA,GACA,MAAA,GAAA,OAAA,EAAA,SAAA,GACA,MAAA,QAAA,EAAA,UAAA,OAAA,EAAA,cC/BA,QAAA,gBAAA,EAAA,GACA,KAAA,MAAA,EACA,KAAA,UAAA,KACA,KAAA,aAAA,KACA,KAAA,YAAA,ECJA,QAAA,kBAAA,EAAA,GACA,GAAA,GAAA,IAEA,GAAA,YAAA,KACA,EAAA,YAAA,EAEA,EAAA,IAAA,oBAAA,SAAA,EAAA,GACA,EAAA,OAAA,WACA,EAAA,YAAA,EACA,QAAA,IAAA,OCTA,QAAA,OAAA,qBCAA,QAAA,OAAA,sBCAA,QAAA,OAAA,gBAAA,QAAA,iBAAA,oBAAA,SAAA,EAAA,GACA,EACA,KAAA,KACA,YAAA,+CAKA,KAAA,SACA,YAAA,mCACA,WAAA,iBACA,aAAA,SAIA,EAAA,WAAA,MCfA,QACA,OAAA,aAAA,UAAA,aAAA,YAAA,iBAAA,oBACA,KAAA,OAAA,aAAA,SAAA,GACA,OAAA,MACA,QAAA,6CAGA,QAAA,IAAA,qBAEA,OAAA,uBAAA,EAAA,eN4BA,QAAA,OAAA,kBAAA,QAAA,eAAA,KAAA,cC9BA,eAAA,UAAA,MAAA,WACA,GAAA,GAAA,KAGA,GACA,QAAA,cACA,KAAA,oBACA,WAAA,EACA,IAAA,IAGA,GAAA,YAAA,IAAA,GACA,KAAA,WACA,EAAA,UAAA,EAAA,YAAA,eACA,QAAA,IAAA,EAAA,cACA,SAAA,GACA,MAAA,WAAA,EAAA,YAaA,eAAA,UAAA,aAAA,WACA,KAAA,aAAA,KAAA,UAAA,OAGA,eAAA,SAAA,SAAA,eACA,QAAA,OAAA,kBAAA,WAAA,kBAAA,SAAA,cAAA,iBC1BA,iBAAA,SAAA,SAAA,QACA,QAAA,OAAA,aAAA,WAAA,oBAAA,SAAA,OAAA,mBKhBA,QAAA,OAAA,mBAAA,QAAA,SAAA,YAAA,SAAA,GACA,MAAA,GAAA,sBCDA,QAAA,OAAA,aAAA,QAAA,QAAA,aAAA,QAAA,SAAA,GACA,GAAA,GAAA,IAEA,GAAA,YAAA,KACA,EAAA,KAAA,KAGA,EAAA,MAAA,WACA,OAAA,MAAA,EAAA,aAGA,EAAA,OAAA,WACA,OAAA,OAAA,EAAA,aAIA,EAAA,WAAA,SAAA,GACA,eAAA,EAEA,OAAA,IAAA,SAAA,SAAA,GACA,QAAA,IAAA,GACA,EAAA,YAAA,EAAA,KAAA,KACA,EAAA,KAAA,EACA,EAAA,WAAA,oBAAA,EAAA,KAAA,SAGA,QAAA,IAAA,6BACA,EAAA,YAAA,EAAA,KAAA","file":"main.min.js","sourcesContent":["function FetchPhotos($q) {\n  return {\n    allPhotos:      [],\n    filteredPhotos: [],\n\n    get: function(opts) {\n      var deferred = $q.defer(),\n          _this    = this;\n\n      _500px.api('/photos', opts, function (response) {\n        if (response.success) {\n          _this.allPhotos      = response.data.photos;\n          _this.filteredPhotos = _this.onlyWithLocation(response.data.photos);\n\n          deferred.resolve({\n            success: true\n          });\n        } else {\n          deferred.reject({\n            success:  false,\n            status:   response.status,\n            message:  response.error_message\n          });\n        }\n      });\n\n      return deferred.promise;\n    },\n\n    onlyWithLocation: function(photos) {\n      return _.filter(photos, function(photo) {\n        return photo.latitude !== null && photo.longitude !== null;\n      });\n    }\n  };\n}\n\nangular.module('pixelPlay.game').factory(\"FetchPhotos\", [\"$q\", FetchPhotos]);","function GameController($scope, FetchPhotos) {\n  this.round = 1;\n  this.photoData = null;\n  this.currentPhoto = null;\n  this.fetchPhotos = FetchPhotos;\n}\n\nGameController.prototype.start = function() {\n  var game = this;\n\n  // get photos. Will extract to Service if it works\n  var opts = {\n    feature:    'fresh_today',\n    only:       'Urban Exploration',\n    image_size: 4,\n    rpp:        100\n  };\n\n  game.fetchPhotos.get(opts)\n    .then(function() {\n      game.photoData = game.fetchPhotos.filteredPhotos;\n      console.log(game.fetchPhotos);\n    }, function(res) {\n      alert(\"Failed: \" + res.message);\n    });\n\n\n\n  // if ( game.photoData.error ) {\n  //   alert(\"ERROR: Code \" + game.photoData.status + \" with message \" + game.photoData.message);\n  // }\n\n  // game.currentPhoto = game.photoData.pop();\n\n};\n\nGameController.prototype.getNextPhoto = function() {\n  this.currentPhoto = this.photoData.pop();\n};\n\nGameController.$inject = ['$scope', 'FetchPhotos'];\nangular.module('pixelPlay.game').controller('GameController', ['$scope', 'FetchPhotos', GameController]);","function GlobalController($scope, User) {\n  var global = this;\n\n  global.currentUser = null;\n  global.userService = User;\n\n  $scope.$on(\"userAuthenticated\", function(e, data) {\n    $scope.$apply(function() {\n      global.currentUser = data;\n      console.log(data);\n    });\n  });\n}\n\n\nGlobalController.$inject = ['$scope', 'User'];\nangular.module('pixelPlay').controller('GlobalController', ['$scope', 'User', GlobalController]);","angular.module(\"pixelPlay.game\", []);","angular.module('pixelPlay.score', []);","angular.module('appRoutes', []).config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {\n  $routeProvider\n    .when('/', {\n      templateUrl:  '/components/dashboard/dashboard.index.html'\n    })\n\n    // GAME ===================================================================\n    // GET :index\n    .when('/game', {\n      templateUrl:  '/components/game/game.index.html',\n      controller:   'GameController',\n      controllerAs: 'game'\n    });\n\n\n    $locationProvider.html5Mode(true);\n}]);","angular\n  .module('pixelPlay', ['ngRoute', 'ngResource', 'appRoutes', 'pixelPlay.game', 'pixelPlay.score'])\n  .run(['User', '$rootScope', function(User, $rootScope) {\n    _500px.init({\n      sdk_key: '1e6cd00470800d39b07106a70a650cdf88277901'\n    });\n\n    console.log(\"500px initialized\");\n\n    _500px.getAuthorizationStatus(User.updateUser);\n\n}]);","angular.module('pixelPlay.score').factory(\"Score\", [\"$resource\", function($resource) {\n  return $resource('/api/scores/:id');\n}]);","angular.module('pixelPlay').service('User', ['$rootScope', 'Score', function($rootScope, Score) {\n  var user = this;\n\n  user.currentUser = null;\n  user.data        = null;\n\n\n  user.login = function() {\n    _500px.login(user.updateUser);\n  };\n\n  user.logout = function() {\n    _500px.logout(user.updateUser);\n  };\n\n  // This is passed in as the callback to 500px's getAuthorizationStatus().\n  user.updateUser = function(res) {\n    if ( res === 'authorized' ) {\n      // Cool, we've got their permission. Let's get their user data.\n      _500px.api('/users', function (response) {\n        console.log(response);\n        user.currentUser = response.data.user;\n        user.data        = response;\n        $rootScope.$broadcast('userAuthenticated', response.data.user);\n      });\n    } else {\n      console.log(\"updateUser is logging out\");\n      user.currentUser = user.data = null;\n    }\n  };\n}]);"],"sourceRoot":"/source/"}